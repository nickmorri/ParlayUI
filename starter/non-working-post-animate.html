<link rel="import" href="post-chip.html">

<polymer-element name="post-animate" attributes='show device_show'>
  <template>

    <style>
      .chip {
        width: 200px;
        height: 270px;
        display: inline-block;
        position: relative;
        border-radius: 3px;
        margin: 4px;
        overflow: hidden;
        text-align: start;
        background-color: #fff;
        box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.16);
      }
      .chip-container {
        position: absolute;
        top: 100px;
        right: 0;
        left: 0;
        text-align: center;
      }
      #device_tabs{
        position: absolute;
        top: 50px;
        left:50px;
        right: 50px;
      }

      paper-tabs::shadow #selectionBar{
          background-color: black;
      }

      paper-tabs 
      {
        background-color: #DB7093;
      }

    </style>
        <div class="chip-container">
        <paper-tabs id="device_tabs" selected="All" self-end>
                  <paper-tab name="All">All</paper-tab>
                  <paper-tab name="Motors">Motors</paper-tab>
                  <paper-tab name="Promenade">Promenade</paper-tab>
                  <paper-tab name="iVar">iVar</paper-tab>
                  <paper-tab name="COM">COM</paper-tab>
        </paper-tabs>

        <core-animated-pages id="animate-chips" transitions="hero-transition" on-core-animated-pages-transition-end="{{done}}" selected="{{device_selected}}" hidden?="{{(show != 'Devices')}}">

              <section>
                  <template repeat="{{items0 as item}}" >
                      <post-chip item={{item}} hero-id="{{item.artist}}-{{item.album}}" hero hidden?="{{item.hidden}}"}></post-chip>
                  </template>
              </section>

              <section>
                  <template repeat="{{items1 as item}}" >
                      <post-chip item={{item}} hero-id="{{item.artist}}-{{item.album}}" hero hidden?="{{item.hidden}}"></post-chip>
                  </template>
              </section>

              <section>
                  <template repeat="{{items2 as item}}" >
                      <post-chip  class="chip" item={{item}} hero-id="{{item.artist}}-{{item.album}}" hero></post-chip>
                  </template>
              </section>

        </core-animated-pages>
        </div>

  </template>
  <script>

    Polymer('post-animate', {

        page: 0,

        items2: [
          { artist: 'Promenade', album: 'Tama', color: '#f4db33' },
          { artist: 'Promenade', album: 'Jarvis', color: '#972ff8' },
          { artist: 'Promenade', album: 'SweetMotor', color: '#7dd6fe' },
          { artist: 'Motors', album: 'MotorX', color: '#00FF00', details: 'This is motor X' },
          { artist: 'Promenade', album: 'SweetTalk', color: '#dc3c84' },
          { artist: 'iVar', album: 'iVar1', color: '#8B4513', details: 'This is an iVar'},
          { artist: 'Motors', album: 'MotorY', color: '#00FF00', details: 'This is motor Y' },
          { artist: 'iVar', album: 'iVar2', color: '#8B4513', details: 'This is an iVar'},
          { artist: 'iVar', album: 'iVar3', color: '#8B4513', details: 'This is an iVar'},
          { artist: 'iVar', album: 'iVar4', color: '#8B4513', details: 'This is an iVar'},
          { artist: 'Motors', album: 'MotorZ', color: '#00FF00', details: 'This is motor Z' },
          { artist: 'iVar', album: 'iVar5', color: '#8B4513', details: 'This is an iVar' },
          { artist: 'iVar', album: 'iVar6', color: '#8B4513', details: 'This is an iVar' }
        ],

        items0: [
        ],

        items1: [
        ],

        selectedAlbum: null,

        ready: function()
        {
          var animated_page = this.shadowRoot.querySelector('core-animated-pages');
          var device_tabs = this.shadowRoot.querySelector('paper-tabs');
          var animate_post = this;
          this.device_selected = 2;
          device_tabs.addEventListener('core-select', function(e) 
          {
            if (e.detail.isSelected)
            {
                if (device_tabs.selected == "All")
                  {animate_post.device_selected = 2;}
                else
                {
                  if (animate_post.device_selected == 0)
                  {
                      animate_post.items1.length = 0;
                      for (var i = 0; i < animate_post.items2.length; i++)
                      {
                        temp = (JSON.parse(JSON.stringify(animate_post.items2[i])));
                        temp.hidden = true;
                        if (animate_post.items2[i].artist == device_tabs.selected)
                        {
                          temp.hidden = false;
                        }
                        animate_post.items1.push(temp);
                      }
                      animate_post.device_selected = 1;
                  }
                  else
                  {
                      animate_post.items0.length = 0;
                      for (var i = 0; i < animate_post.items2.length; i++)
                      {
                        var temp =  (JSON.parse(JSON.stringify(animate_post.items2[i])));
                        temp.hidden = true;
                        if (animate_post.items2[i].artist == device_tabs.selected)
                        {
                          temp.hidden = false;
                        }
                        animate_post.items0.push(temp);
                      }
                      animate_post.device_selected = 0;
                  }

                }
                console.log("Device selected is now"  + animate_post.device_selected);
            }   
          });
        }
    });
  </script>
  </polymer-element>

