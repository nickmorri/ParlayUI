<md-tab label="Log" layout="column">

	<md-toolbar class="md-hue-2">
		<div class="md-toolbar-tools">
			<h5 ng-if="filter_text" ng-pluralize count="ctrl.getFilteredLog(filter_text).length" when="{'0': 'No messages match filter', 'one': '1 message matches', 'other': '{} messages match'}"></h5>
			<h5 ng-if="!filter_text" ng-pluralize count="ctrl.getLog().length" when="{'0': 'No messages logged', 'one': '1 message logged', 'other': '{} messages logged'}"></h5>
			<span flex></span>
			
			<md-menu md-position-mode="target-right target">
				<md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)">
					<md-icon md-menu-origin><ng-md-icon icon="more_vert"></ng-md-icon></md-icon>
				</md-button>
				<md-menu-content>
					<md-menu-item>
						<md-button ng-click="ctrl.closeTab()">
							<md-icon md-menu-align-target><ng-md-icon icon="close"></ng-md-icon></md-icon>
							Close tab
						</md-button>
					</md-menu-item>
				</md-menu-content>
			</md-menu>
		</div>
	</md-toolbar>

	<md-input-container flex="100" ng-show="ctrl.getLog().length" class="filter-input-container" aria-label="Filter log messages">
		<label>Filter</label>
		<input ng-model="filter_text" type="text">
	</md-input-container>
	
    <md-content class="md-padding parlay-endpoint-card-tab-content" scroll-glue>
        <md-list>
			<span ng-repeat="message in ctrl.getFilteredLog(filter_text)">
				<md-list-item class="md-2-line parlay-log-item">
					<div class="md-list-item-text message-text">
						<p>topics:{<span ng-repeat="(key, value) in message.TOPICS">{{key}}:{{value}}<span ng-if="!$last">,</span></span>}</p>
						<p>contents:{<span ng-repeat="(key, value) in message.CONTENTS">{{key}}:{{value}}<span ng-if="!$last">,</span></span>}</p>
					</div>
				</md-list-item>
				<md-divider ng-hide="$last"></md-divider>
			</span>
        </md-list>
    </md-content>
    
</md-tab>